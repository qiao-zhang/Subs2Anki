# Subs2Anki

Subs2Anki 是一个视频字幕处理工具，提供字幕处理和记忆卡片制作解决方案，旨在帮助语言学习者从视频内容中提取有用的语言材料并自动生成Anki记忆卡片。

## 功能特色

### 🎥 视频播放器
- 内置HTML5视频播放器，支持基本播放控制
- 视频帧捕获功能，可截取任意时刻的画面
- 基于字幕行的时间轴导航，支持在字幕之间快速跳转
- 音量控制功能
- 波形图可视化显示音频轨迹，支持精确时间定位

### 📄 字幕处理
- 支持SRT和VTT格式字幕文件
- 字幕编辑功能，可修改字幕行文本
- 字幕时间轴偏移调整，同步视频播放
- 字幕行锁定功能，防止意外修改
- 字幕行拆分与合并功能

### 📺 字幕显示
- 视频播放器上实时显示当前字幕
- 自动匹配视频播放时间与字幕显示
- 波形图可视化显示音频轨迹

### 🃏 Anki卡片生成
- 支持自定义卡片模板
- 自动生成音频剪辑
- 一键生成Anki记忆卡片
- 批量创建卡片功能
- 卡片预览功能

### 🔤 Furigana处理
- 集成Kuroshiro库进行日文假名标注
- 自动为汉字添加平假名片假名标注

### 🔄 Anki连接
- 支持通过AnkiConnect直接同步卡片到Anki桌面应用
- 支持导出为.apkg文件
- 自动检测Anki连接状态
- 支持自定义牌组名称

### ⌨️ 快捷键支持
- 丰富的键盘快捷键提升操作效率（见下）
- / 键显示快捷键提示表

## 安装与运行

### 系统要求
- Node.js 18+ 
- npm 或 yarn

### 安装步骤

1. 克隆项目仓库：
```bash
git clone <this-repo>
cd Subs2Anki
```

2. 安装依赖：
```bash
npm install
```

3. 启动开发服务器：
```bash
npm run dev
```

4. 构建生产版本：
```bash
npm run build
```

## 使用指南

### 基本工作流

1. **加载视频**：点击视频区域或使用控制栏上传视频文件
2. **加载字幕**：点击右侧面板的文件夹图标加载字幕文件
3. **预览和编辑**：在右侧字幕面板查看和编辑字幕
4. **创建卡片**：点击字幕行上的 "+" 按钮或使用快捷键 C 创建Anki卡片
5. **导出或同步**：点击左侧面板的导出或同步按钮

### 快捷键参考

| 快捷键 | 功能                     |
|--------|------------------------|
| / / Tab | 显示/隐藏快捷键提示             |
| Space | 重播当前片段                 |
| P / Q | 播放/暂停                  |
| J / D | 上一个字幕行                 |
| K / F | 下一个字幕行                 |
| H | 显示/隐藏字幕区域              |
| V | 视频独占模式开关               |
| C / N | 为当前字幕行创建卡片             |
| I / E | 切换当前字幕行状态（向前）         |
| O / W | 切换当前字幕行状态（向后）         |
| B / S | 将当前字幕行拆分为两行            |
| A / ; | 将当前字幕行与下一字幕行合并        |
| X / , | 删除当前字幕行                |
| U / Z | 撤销操作                   |
| R / Y | 重做操作                   |
| . / Escape | 打开/关闭设置模态框             |

## 技术栈

- **前端框架**: React 19
- **UI库**: Tailwind CSS, Lucide React
- **状态管理**: Zustand
- **音频处理**: FFmpeg.wasm
- **数据库**: IndexedDB
- **打包工具**: Vite
- **类型检查**: TypeScript

## 贡献

欢迎贡献！请随时在 GitHub 存储库上提交问题和拉取请求。

## 许可证

MIT 许可证。有关更多信息，请参阅 LICENSE 文件。