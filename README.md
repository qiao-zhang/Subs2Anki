# Subs2Anki

Subs2Anki 是一个视频字幕处理工具，提供字幕处理和记忆卡片制作解决方案，旨在帮助语言学习者从视频内容中提取有用的语言材料并自动生成Anki记忆卡片。

## 功能特色

### 🎥 视频播放器
- 内置HTML5视频播放器，支持基本播放控制
- 视频帧捕获功能，可截取任意时刻的画面
- 时间轴精确控制，支持微调播放进度

### 📄 字幕处理
- 支持SRT和VTT格式字幕文件
- 字幕编辑功能，可修改字幕文本
- 字幕锁定功能，防止意外修改
- 字幕时间轴偏移调整，同步视频播放

### 📺 字幕显示
- 视频播放器上实时显示当前字幕
- 美观的字幕样式，半透明背景便于阅读
- 自动匹配视频播放时间与字幕显示

### 🃏 Anki卡片生成
- 一键生成Anki记忆卡片
- 支持自定义卡片模板
- 自动生成音频剪辑
- 支持furigana（日文假名标注）

### 🔤 Furigana处理
- 集成Kuroshiro库进行日文假名标注
- 自动为汉字添加平假名片假名标注

### 🔄 Anki连接
- 支持通过AnkiConnect直接同步卡片到Anki桌面应用
- 支持导出为apkg

### ⌨️ 快捷键支持
- 丰富的键盘快捷键提升操作效率
- Shift+H 显示快捷键提示表

## 安装与运行

### 系统要求
- Node.js 18+ 
- npm 或 yarn

### 安装步骤

1. 克隆项目仓库：
```bash
git clone <this-repo>
cd Subs2Anki
```

2. 安装依赖：
```bash
npm install
```

3. 启动开发服务器：
```bash
npm run dev
```

4. 构建生产版本：
```bash
npm run build
```

## 使用指南

### 基本工作流

1. **加载视频**：点击视频区域或使用控制栏上传视频文件
2. **加载字幕**：点击右侧面板的文件夹图标加载字幕文件
3. **预览和编辑**：在右侧字幕面板查看和编辑字幕
4. **创建卡片**：点击字幕行上的 "+" 按钮或使用快捷键 C 创建Anki卡片
5. **导出或同步**：点击左侧面板的导出或同步按钮

### 快捷键参考

| 快捷键 | 功能         |
|--------|------------|
| Space | 播放/暂停      |
| ← / K | 后退0.5秒     |
| → / L | 前进0.5秒     |
| Shift + ← / Shift + K | 后退5秒       |
| Shift + → / Shift + L | 前进5秒       |
| Ctrl + ← / Ctrl + K | 后退0.1秒     |
| Ctrl + → / Ctrl + L | 前进0.1秒     |
| ↑ / K | 上一个字幕      |
| ↓ / J | 下一个字幕      |
| R | 重播当前片段     |
| C | 为当前字幕行创建卡片 |
| N | 显示/隐藏字幕区域  |
| V | 视频独占模式开关   |
| Shift + H | 显示/隐藏快捷键提示 |

## 技术栈

- **前端框架**: React 19
- **UI库**: Tailwind CSS, Lucide React
- **状态管理**: Zustand
- **视频处理**: HTML5 Video API
- **音频处理**: FFmpeg.wasm
- **数据库**: IndexedDB
- **打包工具**: Vite
- **类型检查**: TypeScript

## 项目结构

```
Subs2Anki-AI/
├── core/           # 核心业务逻辑
│   ├── db/         # 数据库相关
│   ├── ffmpeg/     # FFmpeg处理
│   ├── parser/     # 字幕解析
│   ├── store/      # 状态管理
│   └── types/      # 类型定义
├── services/       # 服务层
├── ui/             # 用户界面组件
│   ├── components/ # UI组件
│   ├── modals/     # 模态框组件
│   └── hooks/      # 自定义Hook
├── public/         # 静态资源
└── src-tauri/      # Tauri相关（如果使用）
```